{% extends 'master.html' %}
{% block content %}

<div class="container mt-4">
  <a href="{% url 'products:product_list' %}" class="btn btn-outline-secondary mb-3">
    <i class="bi bi-arrow-left"></i> Back to List
  </a>

  <div class="card shadow-sm">
    <div class="card-header bg-primary text-white">
      <h4 class="mb-0">{{ product.name }}</h4>
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col-md-5 text-center">
          {% if images %}
            <img src="{{ images.0.image.url }}" alt="{{ product.name }}" class="img-fluid rounded mb-3">
            <div class="d-flex flex-wrap gap-2 justify-content-center">
              {% for img in images %}
                <img src="{{ img.image.url }}" alt="thumb" class="img-thumbnail" style="width: 80px; height: 80px;">
              {% endfor %}
            </div>
          {% else %}
            <img src="https://via.placeholder.com/300x300?text=No+Image" class="img-fluid rounded">
          {% endif %}
        </div>

        <div class="col-md-7">
          <table class="table table-bordered">
            <tr>
              <th>Main Category</th>
              <td>{{ product.main_category.name }}</td>
            </tr>
            <tr>
              <th>Sub Category</th>
              <td>{{ product.sub_category.name|default:"-" }}</td>
            </tr>
            <tr>
              <th>Brand</th>
              <td>{{ product.brand.name|default:"-" }}</td>
            </tr>
            <tr>
              <th>Price</th>
              <td>{{ product.price }}</td>
            </tr>
            <tr>
              <th>Sale Price</th>
              <td>{{ product.sale_price|default:"-" }}</td>
            </tr>
            <tr>
              <th>Quantity</th>
              <td>{{ product.quantity }}</td>
            </tr>
            <tr>
              <th>Stock</th>
              <td>{{ product.stock }}</td>
            </tr>
            <tr>
              <th>Status</th>
              <td>
                {% if product.is_featured %}
                  <span class="badge bg-primary">Featured</span>
                {% endif %}
                {% if product.is_active %}
                  <span class="badge bg-success">Active</span>
                {% else %}
                  <span class="badge bg-danger">Inactive</span>
                {% endif %}
              </td>
            </tr>
          </table>

          <h5 class="mt-4">Description</h5>
          <p>{{ product.description|default:"No description available." }}</p>
        </div>
      </div>

      {% if variants %}
        <h5 class="mt-4">Variants</h5>
        <table class="table table-sm table-bordered">
          <thead class="table-light">
            <tr>
              <th>Variant Name</th>
              <th>Value</th>
              <th>Price Diff</th>
            </tr>
          </thead>
          <tbody>
            {% for v in variants %}
              <tr>
                <td>{{ v.variant_name }}</td>
                <td>{{ v.value }}</td>
                <td>{{ v.price_difference }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% endif %}
    </div>
  </div>
</div>

{% endblock %}
